{
	"schema": "CREATE TABLE IF NOT EXISTS chapters (\n    chapter_name TEXT PRIMARY KEY,\n    title TEXT UNIQUE,\n    opened TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS tags (\n    tag TEXT PRIMARY KEY,\n    comment TEXT DEFAULT 'none',\n    is_principle INTEGER NOT NULL DEFAULT 0 CHECK (is_principle IN (0, 1)),\n    principle_tag TEXT,\n    active INTEGER NOT NULL DEFAULT 1 CHECK (active IN (0, 1)),\n    is_system INTEGER NOT NULL DEFAULT 0 CHECK (is_system IN (0, 1)),\n    created_time TEXT NOT NULL,\n    updated_time TEXT NOT NULL,\n    system_type TEXT NOT NULL DEFAULT 'N' CHECK (system_type IN ('N', 'A', 'P', 'S'))\n);\n\nCREATE TABLE IF NOT EXISTS entries (\n    entry_id INTEGER PRIMARY KEY AUTOINCREMENT,\n    chapter_name TEXT NOT NULL,\n    tag TEXT NOT NULL,\n    date TIMESTAMP NOT NULL,\n    country TEXT NOT NULL,\n    city TEXT NOT NULL,\n    message TEXT NOT NULL,\n    FOREIGN KEY (chapter_name) REFERENCES chapters(chapter_name),\n    FOREIGN KEY (tag) REFERENCES tags(tag)\n);\n\nCREATE TABLE reminds (\n    entry_id INTEGER PRIMARY KEY, \n    remind_date TIMESTAMP NOT NULL,\n    repeat TEXT NOT NULL DEFAULT 'none',\n    remind_title TEXT DEFAULT 'none',\n    FOREIGN KEY (entry_id) REFERENCES entries(entry_id)\n);\n\nCREATE TABLE IF NOT EXISTS system (\n    date INTEGER NOT NULL,\n    tag TEXT NOT NULL,\n    observation TEXT DEFAULT 'none',\n    result TEXT NOT NULL DEFAULT 'white' CHECK (result IN ('white','green', 'yellow', 'red','blue')),\n    PRIMARY KEY (date, tag),\n    FOREIGN KEY (tag) REFERENCES tags (tag)\n);\n\nCREATE INDEX idx_chapter_name ON entries (chapter_name);\nCREATE INDEX idx_tag ON entries (tag);\nCREATE INDEX idx_date ON entries (date);\nCREATE INDEX idx_date_remind ON reminds (remind_date);\nCREATE INDEX idx_date_result ON system (date, result);\nCREATE INDEX idx_date_tag_result ON system (date, tag, result);"
}